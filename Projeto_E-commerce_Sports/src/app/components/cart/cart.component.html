<div class="cart">
  <app-navbar></app-navbar>

  <div class="cart__wrapper">
    <div class="cart__bg" aria-hidden="true"></div>

    <div class="cart__content">
      <div class="cart__container">
        <h1 class="cart__title">CARRINHO</h1>
        <p class="cart__subtitle">Seus produtos selecionados</p>

        <!-- Loading State -->
        <div *ngIf="isLoading" class="cart__loading">
          <p>Carregando carrinho...</p>
        </div>

        <!-- Empty Cart -->
        <div *ngIf="!isLoading && isCartEmpty()" class="cart__empty">
          <h3>Seu carrinho est√° vazio</h3>
          <p>Adicione produtos clicando nos √≠cones de sacola!</p>
          <button class="cart__continue-btn" (click)="continueShopping()">
            Continuar Comprando
          </button>
        </div>

        <!-- Cart Items -->
        <div *ngIf="!isLoading && !isCartEmpty()" class="cart__items">
          <div *ngFor="let item of cartItems" class="cart__item">
            <div class="cart__item-image">
              <img [src]="item.imageSrc" [alt]="item.name" loading="lazy">
            </div>
            <div class="cart__item-details">
              <h3 class="cart__item-name">{{ item.name }}</h3>
              <p class="cart__item-price">{{ item.price }}</p>
              
              <div class="cart__item-options" *ngIf="item.size || item.shoeSize">
                <span *ngIf="item.size" class="cart__item-size">Tamanho: {{ item.size }}</span>
                <span *ngIf="item.shoeSize" class="cart__item-shoe-size">Numera√ß√£o: {{ item.shoeSize }}</span>
              </div>

              <div class="cart__item-quantity">
                <button 
                  class="cart__quantity-btn cart__quantity-btn--minus" 
                  (click)="decrementQuantity(item)"
                  [disabled]="item.quantity <= 1"
                  aria-label="Diminuir quantidade">
                  -
                </button>
                <span class="cart__quantity">{{ item.quantity }}</span>
                <button 
                  class="cart__quantity-btn cart__quantity-btn--plus" 
                  (click)="incrementQuantity(item)"
                  aria-label="Aumentar quantidade">
                  +
                </button>
              </div>
            </div>
            
            <div class="cart__item-actions">
              <button 
                class="cart__remove-btn" 
                (click)="removeItem(item)"
                aria-label="Remover item do carrinho">
                üóëÔ∏è
              </button>
            </div>
          </div>

          <!-- Cart Summary -->
          <div class="cart__summary">
            <div class="cart__summary-line">
              <span>Subtotal ({{ getCartItemCount() }} itens):</span>
              <span>{{ cartTotalFormatted }}</span>
            </div>
            <div class="cart__summary-line">
              <span>Frete:</span>
              <span>Gr√°tis</span>
            </div>
            <div class="cart__summary-line cart__summary-line--total">
              <span>Total:</span>
              <span>{{ cartTotalFormatted }}</span>
            </div>
            
            <div class="cart__actions">
              <button class="cart__clear-btn" (click)="clearCart()">
                Limpar Carrinho
              </button>
              <button class="cart__checkout-btn" (click)="proceedToCheckout()">
                Finalizar Compra
              </button>
              <button class="cart__continue-btn" (click)="continueShopping()">
                Continuar Comprando
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
